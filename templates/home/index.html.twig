{% extends 'base.html.twig' %}

{% block title %}Hello HomeController!{% endblock %}

{% block body %}
    <style>
        .btn-h-2rem {
            height: 2rem;
        }
    </style>
    <h1>Accueil</h1>

    <h2 class="mb-2">Evénements disponibles : </h2>

    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-4 text-start">
        {% for evenement in evenements %}
            <div class="col p-2">
                <div class="card h-100">
                    <div class="card-body d-flex flex-wrap">
                        <h5 class="card-title w-100 align-self-start">{{ evenement.titre }}</h5>
                        <p class="card-text w-100">{{ evenement.description }}</p>
                        <p class="card-text w-100">{{ evenement.debut|date("d/m/y H:i") }} - {{ evenement.fin|date("H:i") }}</p>
                        <p class="card-text w-100">Lieu : <span class=fst-italic>{{ evenement.lieu }}</span></p>
                        <p class="card-text w-100">Créé par {{ evenement.createur }}</p>
                        {% if is_granted("ROLE_USER") %}

                            {% if evenement.isInscrit == false %}
                                <a type="button" class="btn btn-sm btn-primary btn-h-2rem" href="{{ path("app_inscription_evenement", {"id": evenement.id})}}">S'inscrire</a>
                            {% else %}
                                <a type="button" class="btn btn-sm btn-danger btn-h-2rem" href="{{ path("app_desinscription_evenement", {"id": evenement.id})}}">Se Désinscrire</a>
                            {% endif %}
                        {% endif %}
                        {% if (is_granted("ROLE_ADMIN")) or (evenement.isCreateur == true) %}
                            <div class="w-100 my-2">
                                <a type="button" class="btn btn-sm btn-warning btn-h-2rem" href="{{ path("app_edit_evenement_form", {"id": evenement.id})}}">Modifier</a>
                                <a type="button" class="btn btn-sm btn-danger btn-h-2rem mx-2" href="{{ path("app_delete_evenement", {"id": evenement.id})}}">Supprimer</a>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}
